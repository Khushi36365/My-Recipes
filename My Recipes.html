<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Recipes</title>
  <style>
    /* Basic CSS styling */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f7d9e3;
    }
    header {
      background-color: #000;
      color: #fff;
      padding: 10px;
      text-align: center;
    }
    .container {
      max-width: 800px;
      margin: 20px auto;
      padding: 0 20px;
    }
    .recipe {
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #fff;
      overflow: hidden;
    }
    .recipe img {
      width: 100%;
      height: auto;
    }
    .recipe-content {
      padding: 20px;
    }
    .recipe h3 {
      color: #000000;
      margin-top: 0;
    }
    .recipe p {
      color: #666;
    }
    form {
      background-color: #fff;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    label {
      font-weight: bold;
    }
    input[type="text"],
    textarea {
      width: calc(100% - 16px);
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background-color: #45a049;
    }
    h2{
      text-align: center;
      color: #000000;
      margin-top: 40px;
      font-size: 24px;
      font-weight: bold;
      letter-spacing: 1px;
      padding-bottom: 10px;
    }

  </style>
</head>
<body>
  <header>
    <h1>My Recipes</h1>
  </header>
  <div class="container">
    <h2>Featured Recipes</h2>
    <div class="recipe">
      <img src="https://www.modernhoney.com/wp-content/uploads/2023/02/Spaghetti-Carbonara-8-720x595.jpg" alt="Spaghetti Carbonara">
      <div class="recipe-content">
        <h3>Spaghetti Carbonara</h3>
        <p><strong>Ingredients:</strong> Spaghetti, Bacon, Eggs, Parmesan Cheese, Black Pepper</p>
        <p><strong>Instructions:</strong> Cook spaghetti according to package instructions. In a separate pan, cook diced bacon until crispy. In a bowl, whisk eggs and grated parmesan cheese. Once spaghetti is cooked, drain and add to the pan with bacon. Remove from heat and quickly stir in egg mixture until the eggs are cooked by the residual heat. Season with black pepper and serve immediately.</p>
      </div>
    </div>
    <div class="recipe">
      <img src="https://www.seriouseats.com/thmb/DbQHUK2yNCALBnZE-H1M2AKLkok=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/chicken-tikka-masala-for-the-grill-recipe-hero-2_1-cb493f49e30140efbffec162d5f2d1d7.JPG" alt="Chicken Tikka Masala">
      <div class="recipe-content">
        <h3>Chicken Tikka Masala</h3>
        <p><strong>Ingredients:</strong> Chicken, Yogurt, Lemon Juice, Ginger, Garlic, Garam Masala, Tomato Sauce, Cream</p>
        <p><strong>Instructions:</strong> Marinate chicken pieces in yogurt, lemon juice, ginger, garlic, and garam masala. Grill or bake chicken until cooked through. In a separate pan, heat tomato sauce and cream. Add grilled chicken to the sauce and simmer until heated through. Serve hot with rice or naan.</p>
      </div>
    </div>
    <div class="recipe">
        <img src="https://bakeplaysmile.com/wp-content/uploads/2022/06/tiramisu-6.jpg" alt="Tiramisu">
        <div class="recipe-content">
          <h3>Tiramisu</h3>
          <p><strong>Ingredients:</strong> Ladyfingers, Espresso, Mascarpone Cheese, Eggs, Sugar, Cocoa Powder</p>
          <p><strong>Instructions:</strong> Dip ladyfingers in espresso and arrange them in a single layer in a dish. In a separate bowl, mix mascarpone cheese, egg yolks, and sugar until smooth. In another bowl, beat egg whites until stiff peaks form. Gently fold egg whites into mascarpone mixture. Spread half of the mixture over the ladyfingers. Repeat layers and refrigerate for several hours. Dust with cocoa powder before serving.</p>
        </div>
      </div>  
      <div class="recipe">
        <img src="https://www.twopeasandtheirpod.com/wp-content/uploads/2019/05/Pasta-Primavera-3.jpg" alt="Pasta Primavera">
        <div class="recipe-content">
          <h3>Pasta Primavera</h3>
          <p><strong>Ingredients:</strong> Pasta, Assorted Vegetables (such as bell peppers, cherry tomatoes, broccoli), Olive Oil, Garlic, Parmesan Cheese, Salt, Pepper</p>
          <p><strong>Instructions:</strong> Cook pasta according to package instructions. In a large skillet, heat olive oil over medium heat. Add minced garlic and saut√© until fragrant. Add chopped vegetables and cook until tender. Toss cooked pasta with the vegetable mixture. Season with salt, pepper, and grated parmesan cheese. Serve hot.</p>
        </div>
      </div>
      <div class="recipe">
        <img src="https://www.modernhoney.com/wp-content/uploads/2022/07/Fresh-Mango-Salsa-2-scaled.jpg" alt="Mango Salsa">
        <div class="recipe-content">
          <h3>Mango Salsa</h3>
          <p><strong>Ingredients:</strong> Mango, Red Onion, Jalapeno Pepper, Cilantro, Lime Juice, Salt</p>
          <p><strong>Instructions:</strong> Dice mango, red onion, and jalapeno pepper. Chop cilantro finely. Mix all ingredients together in a bowl. Add lime juice and salt to taste. Refrigerate for at least 30 minutes before serving.</p>
        </div>
      </div>
      <div class="recipe">
        <img src="https://hips.hearstapps.com/hmg-prod/images/greek-salad-lead-642f29241cceb.jpg?crop=1xw:1xh;center,top&resize=980:*" alt="Greek Salad">
        <div class="recipe-content">
          <h3>Greek Salad</h3>
          <p><strong>Ingredients:</strong> Cucumber, Tomato, Red Onion, Kalamata Olives, Feta Cheese, Olive Oil, Red Wine Vinegar, Oregano, Salt, Pepper</p>
          <p><strong>Instructions:</strong> Dice cucumber, tomato, and red onion. Pit and slice kalamata olives. Crumble feta cheese. Mix all ingredients in a large bowl. Drizzle with olive oil and red wine vinegar. Sprinkle with dried oregano, salt, and pepper. Toss gently to combine. Serve chilled.</p>
        </div>
      </div>                  
    <!-- Add more featured recipes as needed -->
    <hr>
    <h2>Add New Recipe</h2>
    <form id="recipeForm">
      <label for="title">Title:</label><br>
      <input type="text" id="title" name="title" required><br>
      <label for="ingredients">Ingredients:</label><br>
      <textarea id="ingredients" name="ingredients" required></textarea><br>
      <label for="instructions">Instructions:</label><br>
      <textarea id="instructions" name="instructions" required></textarea><br>
      <button type="submit">Submit</button>
    </form>
  </div>

  <script>
    // JavaScript code for interacting with backend

    // Function to fetch and display recipes
    async function fetchRecipes() {
      const recipeList = document.getElementById('recipeList');
      recipeList.innerHTML = ''; // Clear previous recipes

      const response = await fetch('/recipes');
      const recipes = await response.json();

      recipes.forEach(recipe => {
        const recipeDiv = document.createElement('div');
        recipeDiv.classList.add('recipe');
        recipeDiv.innerHTML = `
          <img src="${recipe.image}" alt="${recipe.title}">
          <div class="recipe-content">
            <h3>${recipe.title}</h3>
            <p><strong>Ingredients:</strong> ${recipe.ingredients.join(', ')}</p>
            <p><strong>Instructions:</strong> ${recipe.instructions}</p>
          </div>
        `;
        recipeList.appendChild(recipeDiv);
      });
    }

    // Function to handle form submission
    async function handleSubmit(event) {
      event.preventDefault();

      const form = event.target;
      const formData = new FormData(form);

      const response = await fetch('/recipes', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(Object.fromEntries(formData))
      });

      if (response.ok) {
        form.reset();
        fetchRecipes(); // Fetch recipes again to display the updated list
      } else {
        alert('Failed to add recipe');
      }
    }

    // Attach event listener to form submission
    document.getElementById('recipeForm').addEventListener('submit', handleSubmit);

    // Fetch recipes when the page loads
    fetchRecipes();

  </script>
</body>
</html>
